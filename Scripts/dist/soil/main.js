!function(t){"function"==typeof define&&define.amd?define("soilcalculator",[],t):SoilCalculator=t()}(function(){var t=function(t){var e=[0,0,0,0,0,0,0,0,0],r=0;return t.forEach(function(t){r+=1,t.data.forEach(function(t,r){e[r]+=t.water})}),e.forEach(function(t,a){e[a]=t/r}),e};return{calculate:t}}),function(t){"function"==typeof define&&define.amd?define("soildata",[],t):SoilData=t()}(function(){return[{label:"Akadama",data:[{hour:0,water:.347},{hour:1,water:.325},{hour:2,water:.304},{hour:3,water:.283},{hour:6,water:.228},{hour:12,water:.203},{hour:24,water:.186},{hour:48,water:.106},{hour:72,water:.072}]},{label:"Pumice",data:[{hour:0,water:.19},{hour:1,water:.177},{hour:2,water:.135},{hour:3,water:.109},{hour:6,water:.05},{hour:12,water:.029},{hour:24,water:.02},{hour:48,water:0},{hour:72,water:0}]},{label:"Lava",data:[{hour:0,water:.178},{hour:1,water:.165},{hour:2,water:.123},{hour:3,water:.097},{hour:6,water:.038},{hour:12,water:.017},{hour:24,water:0},{hour:48,water:0},{hour:72,water:0}]},{label:"DE",data:[{hour:0,water:.452},{hour:1,water:.444},{hour:2,water:.418},{hour:3,water:.402},{hour:6,water:.342},{hour:12,water:.317},{hour:24,water:.287},{hour:48,water:.203},{hour:72,water:.165}]},{label:"Turface",data:[{hour:0,water:.304},{hour:1,water:.266},{hour:2,water:.245},{hour:3,water:.232},{hour:6,water:.207},{hour:12,water:.19},{hour:24,water:.173},{hour:48,water:.101},{hour:72,water:.072}]},{label:"Bark",data:[{hour:0,water:.093},{hour:1,water:.088},{hour:2,water:.073},{hour:3,water:.068},{hour:6,water:.051},{hour:12,water:.042},{hour:24,water:.037},{hour:48,water:.017},{hour:72,water:.002}]},{label:"Perlite",data:[{hour:0,water:.165},{hour:1,water:.152},{hour:2,water:.127},{hour:3,water:.101},{hour:6,water:.055},{hour:12,water:.03},{hour:24,water:.021},{hour:48,water:0},{hour:72,water:0}]}]}),function(t){"function"==typeof define&&define.amd?define("pottingsoildata",[],t):PottingSoilData=t()}(function(){return[{label:"Potting Soil",data:[{hour:0,water:.372},{hour:1,water:.355},{hour:2,water:.338},{hour:3,water:.317},{hour:6,water:.279},{hour:12,water:.254},{hour:24,water:.224},{hour:48,water:.152},{hour:72,water:.118}]},{label:"River Sand",data:[{hour:0,water:.334},{hour:1,water:.317},{hour:2,water:.292},{hour:3,water:.266},{hour:6,water:.216},{hour:12,water:.199},{hour:24,water:.165},{hour:48,water:.063},{hour:72,water:.025}]}]}),function(t){"function"==typeof define&&define.amd?define("soilchart",["chartjs"],t):SoilChart=t(Chart)}(function(t){var e,r=function(t,r){var a=t,o={label:a,borderColor:r,pointBackgroundColor:r,pointBorderColor:"rgba(255,255,255,1)",backgroundColor:"rgba(0,0,0,0)",data:[]};e.data.labels.forEach(function(t){o.data.push(0)}),e.data.datasets.unshift(o),e.update()},a=function(t,r){e.data.datasets[t].data=r,e.update()},o=function(t,r,a){var o={labels:a,datasets:[]},n={responsive:!0,maintainAspectRatio:!1,title:{display:!0,text:r},tooltips:{mode:"index",intersect:!1,itemSort:function(t,e){return t.y<e.y?-1:t.y>e.y?1:0}},hover:{mode:"index",intersect:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}};Chart.defaults.global.defaultFontColor="#FFF",e=new Chart(t,{type:"line",data:o,options:n})};return{Init:o,NewDataset:r,UpdateDataset:a}}),function(t){"function"==typeof define&&define.amd?define("soilcolormaker",[],t):SoilColorMaker=t()}(function(){var t=-1,e=["4CAF50","00BCD4","9C27B0","3F51B5","FFA000","C62828"],r=function(t,e){var r=parseInt(t.substring(0,2),16),a=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return"rgba("+r+","+a+","+o+","+e+")"},a=function(a){t+=1,(0>t||t==e.length)&&(t=0);var o=e[t];return r(o,a)},o=function(a){var o=t;(0>o||o==e.length)&&(o=0);var n=e[o];return r(n,a)};return{GetNewColor:a,GetCurrentColor:o}}),function(t){"function"==typeof define&&define.amd?define("soilui",["soilcalculator","soildata","pottingsoildata","soilchart","soilcolormaker"],t):SoilUI=t(SoilCalculator,SoilData,PottingSoilData,SoilChart,SoilColorMaker)}(function(t,e,r,a,o){var n=function(t,e,r){for(var a=0;a<t.length;a++)e.call(r,t[a],a,t)},u=function(t){var e=t.querySelector(".loading");t.removeChild(e)},i=function(t){var e=document.querySelector(".mix.active .substrate-container"),r=t.cloneNode(!0);r.title="Remove "+t.value,e.appendChild(r)},l=function(t){var e=s(t.target,"substrate");e&&(i(e),h())},c=function(t){var e=document.createElement("button");return e.className="substrate",e.innerHTML=t.label,e.value=t.label,e.title="Add "+t.label,e.dataset.substrate=JSON.stringify(t),e},d=function(){var t=document.getElementById("source");t.addEventListener("click",l);var r=document.getElementById("substrate-container");r&&e.forEach(function(t){var e=c(t);r.appendChild(e)}),u(r)},h=function(){var e=[],r=document.querySelectorAll(".mix.active .substrate");n(r,function(t){e.push(JSON.parse(t.dataset.substrate))});var o=-1,u=document.querySelectorAll(".mix");if(n(u,function(t,e){t.classList.contains("active")&&(o=e)}),o>=0){var i=t.calculate(e),l=[];i.forEach(function(t){l.push(Math.round(1e3*t)/1e3)}),a.UpdateDataset(o,l)}},s=function(t,e){return t?t.classList.contains(e)?t:s(t.parentElement,e):null},f=function(t){var e=s(t.target,"mix");if(e){w(e);var r=s(t.target,"substrate");r&&(r.parentElement.removeChild(r),h())}},w=function(t){var e=document.querySelectorAll(".mix");n(e,function(t){t.classList.remove("active")}),t.classList.add("active")},m=function(t,e){var r=document.querySelectorAll(".mix"),a=(r.length+1,document.createElement("div"));a.className="mix active";var o=document.createElement("div");o.className="label",o.appendChild(document.createTextNode(t));var n=document.createElement("div");return n.className="substrate-container",a.appendChild(o),a.appendChild(n),a.style.backgroundColor=e,a},v=function(){var t=document.querySelectorAll(".mix"),e=t.length+1,r="Mix "+e,n=o.GetNewColor(1),u=document.getElementById("mixes-container"),i=m(r,n);u.insertBefore(i,u.firstChild),w(i),a.NewDataset(r,n)},p=function(t){v(),t.forEach(function(t){var e=document.querySelector(".substrate[value="+t+"]");i(e)}),h()},b=function(){var t=document.getElementById("destination");t.addEventListener("click",f);var e=document.getElementById("btn-add");e.addEventListener("click",v),p(["Akadama","Pumice","Lava"]),v();var r=document.getElementById("mixes-container");u(r)},g=function(){r.forEach(function(t){var e=o.GetNewColor(1);a.NewDataset(t.label,e);var r=[];t.data.forEach(function(t){r.push(t.water)}),a.UpdateDataset(0,r)})},C=function(){var t="Water ratio by volume - %",e=["0hr","1hr","2hr","3hr","6hr","12hr","24hr","48hr","72hr"],r=document.getElementById("chart1").getContext("2d");a.Init(r,t,e),g()},y=function(){C(),d(),b()};return{Init:y}}),"function"==typeof define&&define.amd?(require.config({paths:{chartjs:"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min"}}),require(["soilui"],function(t){t.Init()})):SoilUI.Init(),define("main",function(){});