"use strict";(function(n){typeof define=="function"&&define.amd?define(["lightcalculator","suncalc","sundata","bulbdata","lightchart","lightcolormaker"],n):LightUI=n(LightCalculator,SunCalc,SunData,BulbData,LightChart,LightColorMaker)})(function(n,t,i,r,u,f){var e=function(n,t,i){for(var r=0;r<n.length;r++)t.call(i,n[r],r,n)},o=function(n){var t=n.querySelector(".loading");n.removeChild(t)},s=function(n,t,i){var r=document.createElement("button");return r.className=n,r.innerHTML=t,r.title=t,r.value=i,r},c=function(){var r=document.querySelector(".azimuth.active").value;r=parseFloat(r);var s=document.querySelector(".location.active").value,f=i.GetData(s),h=f.longitude,c=f.latitude,e=[],o=[];f.data.forEach(function(i){var u=0,f=0;i.hourly.forEach(function(e){var s=new Date(0,0,i.day,e.hour+1),o=t.getPosition(s,c,h);o.azimuth*=-1;u+=n.calculateInside(o.altitude,o.azimuth,Math.PI/2,r,e);f+=n.calculateOutside(o.altitude,o.azimuth,0,o.azimuth,e)});u=Math.round(u*7.058/1e3);f=Math.round(f*7.058/1e3);e.push(u);o.push(f)});u.UpdateDataset(0,o);u.UpdateDataset(1,e)},l=function(){var n=document.querySelectorAll(".location");e(n,function(n){n.classList.remove("active")});this.classList.add("active");c()},a=function(){var t=i.GetLocations(),n=document.getElementById("location-container");t.forEach(function(t,i){var r=s("location",t.label,t.id);r.addEventListener("click",l);n.appendChild(r);i==0&&r.classList.add("active")});o(n)},v=function(){var n=document.querySelectorAll(".azimuth");e(n,function(n){n.classList.remove("active")});this.classList.add("active");c()},y=function(){var t=[{label:"N",value:-1*Math.PI},{label:"NW",value:-3*Math.PI/4},{label:"W",value:Math.PI/-2},{label:"SW",value:Math.PI/-4},{label:"S",value:0},{label:"SE",value:Math.PI/4},{label:"E",value:Math.PI/2},{label:"NE",value:3*Math.PI/4}],n=document.getElementById("azimuth-container");t.forEach(function(t,i){var r=s("azimuth",t.label,t.value);r.addEventListener("click",v);n.appendChild(r);i==4&&r.classList.add("active")});o(n)},p=function(){a();y();u.NewDataset("outdoor",f.GetNewColor(1));u.NewDataset("indoor",f.GetNewColor(1));c()},h=function(){var t=parseInt(document.querySelector(".bulb.active").value),i=parseInt(document.querySelector(".distance.active").value),f=parseInt(document.querySelector(".coverage.active").value),e=Math.round(r.bulbs[t].data[i][f]*18*3.6/1e3),n=[];["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].forEach(function(){n.push(e)});u.UpdateDataset(2,n)},w=function(){var n=document.querySelectorAll(".distance");e(n,function(n){n.classList.remove("active")});this.classList.add("active");h()},b=function(){var t=r.distances,n=document.getElementById("distance-container");t.forEach(function(t,i){var r=s("distance",t,i);r.addEventListener("click",w);n.appendChild(r);i==0&&r.classList.add("active")});o(n)},k=function(){var n=document.querySelectorAll(".coverage");e(n,function(n){n.classList.remove("active")});this.classList.add("active");h()},d=function(){var t=r.coverages,n=document.getElementById("coverage-container");t.forEach(function(t,i){var r=s("coverage",t,i);r.addEventListener("click",k);n.appendChild(r);i==0&&r.classList.add("active")});o(n)},g=function(){var n=document.querySelectorAll(".bulb");e(n,function(n){n.classList.remove("active")});this.classList.add("active");h()},nt=function(){var t=r.bulbs,n=document.getElementById("bulb-container");t.forEach(function(t,i){var r=s("bulb",t.label,i);r.addEventListener("click",g);n.appendChild(r);i==0&&r.classList.add("active")});o(n)},tt=function(){nt();b();d();u.NewDataset("bulb",f.GetNewColor(1));h()},it=function(){var n=document.getElementById("chart1").getContext("2d");u.Init(n,"Daily Light Integral - mol/m²day",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"])},rt=function(){it();p();tt()};return{Init:function(){rt()}}});